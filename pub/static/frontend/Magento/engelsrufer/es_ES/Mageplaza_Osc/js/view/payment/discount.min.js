define(['ko','Magento_SalesRule/js/view/payment/discount','Mageplaza_Osc/js/model/osc-loader/discount','Magento_Checkout/js/model/shipping-rate-service','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-rate-registry'],function(ko,Component,discountLoader,shippingRateService,quote,rateRegistry){'use strict';return Component.extend({defaults:{template:'Mageplaza_Osc/container/review/discount'},isBlockLoading:discountLoader.isLoading,initialize:function(){this._super();this.isApplied(window.checkoutConfig.quoteData.coupon_code);this.isApplied.subscribe(function(){if(!quote.shippingAddress()||quote.isVirtual()){return this;}
var shippingAddress=quote.shippingAddress();if(shippingAddress.getCacheKey()){rateRegistry.set(shippingAddress.getCacheKey(),null);}
if(shippingAddress.countryId){shippingRateService.estimateShippingMethod();}});}});});