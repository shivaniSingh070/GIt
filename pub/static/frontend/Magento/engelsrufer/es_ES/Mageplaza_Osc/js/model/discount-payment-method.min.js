define(['mage/storage','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/quote'],function(storage,errorProcessor,totals,quote){'use strict';return function(serviceUrl,payload){totals.isLoading(true);return storage.post(serviceUrl,JSON.stringify(payload)).fail(function(response){errorProcessor.process(response);}).success(function(response){quote.setTotals(response);}).always(function(){totals.isLoading(false);});};});