define(['jquery','Magento_Ui/js/model/messageList','PayPal_Braintree/js/view/payment/3d-secure','Magento_Checkout/js/model/full-screen-loader'],function($,globalMessageList,verify3DSecure,fullScreenLoader){'use strict';return{validators:[],getConfig:function(){return window.checkoutConfig.payment;},initialize:function(){var config=this.getConfig();if(config[verify3DSecure.getCode()].enabled){verify3DSecure.setConfig(config[verify3DSecure.getCode()]);this.add(verify3DSecure);}},add:function(validator){this.validators.push(validator);},validate:function(context,callback,errorCallback){var self=this,deferred;if(!self.validators.length){callback();return;}
deferred=$.map(self.validators,function(current){return current.validate(context);});$.when.apply($,deferred).done(function(){callback();}).fail(function(error){errorCallback();self.showError(error);});},showError:function(errorMessage){globalMessageList.addErrorMessage({message:errorMessage});fullScreenLoader.stopLoader(true);}};});