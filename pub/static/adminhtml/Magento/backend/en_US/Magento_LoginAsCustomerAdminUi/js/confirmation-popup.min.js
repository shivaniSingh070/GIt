define(['uiComponent','Magento_Ui/js/modal/confirm','jquery','ko','mage/translate','mage/template','underscore','Magento_Ui/js/modal/alert','text!Magento_LoginAsCustomerAdminUi/template/confirmation-popup/store-view-ptions.html'],function(Component,confirm,$,ko,$t,template,_,alert,selectTpl){'use strict';return Component.extend({initialize:function(){var self=this,content;this._super();content='<div class="message message-warning">'+self.content+'</div>';if(self.showStoreViewOptions){content=template(selectTpl,{data:{showStoreViewOptions:self.showStoreViewOptions,storeViewOptions:self.storeViewOptions,label:$t('Store View')}})+content;}
window.lacConfirmationPopup=function(url){confirm({title:self.title,content:content,modalClass:'confirm lac-confirm',actions:{confirm:function(){var storeId=$('#lac-confirmation-popup-store-id').val(),formKey=$('input[name="form_key"]').val(),params={};if(storeId){params.store_id=storeId;}
if(formKey){params.form_key=formKey;}
$.ajax({url:url,type:'POST',dataType:'json',data:params,showLoader:true,success:function(data){var messages=data.messages||[];if(data.message){messages.push(data.message);}
if(data.redirectUrl){window.open(data.redirectUrl);}else if(messages.length){messages=messages.map(function(message){return _.escape(message);});alert({content:messages.join('<br>')});}},error:function(jqXHR){alert({content:_.escape(jqXHR.responseText)});}});}},buttons:[{text:$t('Cancel'),class:'action-secondary action-dismiss',click:function(event){this.closeModal(event);}},{text:$t('Login as Customer'),class:'action-primary action-accept',click:function(event){this.closeModal(event,true);}}]});return false;};}});});