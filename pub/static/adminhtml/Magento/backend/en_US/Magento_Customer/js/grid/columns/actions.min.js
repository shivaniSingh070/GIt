define(['Magento_Ui/js/grid/columns/actions','Magento_Ui/js/modal/alert','underscore','jquery','mage/translate'],function(Actions,uiAlert,_,$,$t){'use strict';return Actions.extend({defaults:{ajaxSettings:{method:'POST',dataType:'json'},listens:{action:'onAction'},ignoreTmpls:{fieldAction:true,options:true,action:true}},onAction:function(data){if(data.action==='delete'){this.source().reload({refresh:true});}},defaultCallback:function(actionIndex,recordId,action){if(action.isAjax){this.request(action.href).done(function(response){var data;if(!response.error){data=_.findWhere(this.rows,{_rowIndex:action.rowIndex});this.trigger('action',{action:actionIndex,data:data});}}.bind(this));}else{this._super();}},request:function(href){var settings=_.extend({},this.ajaxSettings,{url:href,data:{'form_key':window.FORM_KEY}});$('body').trigger('processStart');return $.ajax(settings).done(function(response){if(response.error){uiAlert({content:response.message});}}).fail(function(){uiAlert({content:$t('Sorry, there has been an error processing your request. Please try again later.')});}).always(function(){$('body').trigger('processStop');});}});});