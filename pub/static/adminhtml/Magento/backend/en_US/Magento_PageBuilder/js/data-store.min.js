define(["jquery","Magento_PageBuilder/js/utils/object"],function(_jquery,_object){var DataStore=function(){"use strict";function DataStore(){this.state={};this.events=(0,_jquery)({});this.previousState={};}
var _proto=DataStore.prototype;_proto.get=function get(key,defaultValue){return(0,_object.get)(this.state,key,defaultValue);};_proto.getState=function getState(){return this.state;};_proto.getPreviousState=function getPreviousState(){return this.previousState;};_proto.set=function set(key,value){this.previousState=Object.assign({},this.state);(0,_object.set)(this.state,key,value);this.emitState();};_proto.setState=function setState(state){this.previousState=Object.assign({},this.state);this.state=state;this.emitState();};_proto.unset=function unset(key){var storeState=this.state;delete storeState[key];this.setState(storeState);};_proto.subscribe=function subscribe(handler,key){var _this=this;this.events.on("state",function(event,data){if(key){if(_this.previousState[key]!==data.state[key]){handler(data.state,event);}}else{if(_this.previousState!==data.state){handler(data.state,event);}}});};_proto.emitState=function emitState(){this.events.trigger("state",{state:this.state});};return DataStore;}();return DataStore;});