define(["Magento_PageBuilder/js/events","uiLayout","uiRegistry"],function(_events,_uiLayout,_uiRegistry){var Uploader=function(){"use strict";function Uploader(name,uploaderConfig,contentTypeId,dataStore,initialValue,onChangeCallback,onDeleteCallback){if(onChangeCallback===void 0){onChangeCallback=null;}
if(onDeleteCallback===void 0){onDeleteCallback=null;}
var config=Object.assign({},uploaderConfig,{value:initialValue});config.id=contentTypeId;config.name=name;this.dataStore=dataStore;_events.on("image:"+contentTypeId+":uploadAfter",onChangeCallback?onChangeCallback:this.onImageChanged.bind(this));_events.on("image:"+contentTypeId+":deleteFileAfter",onDeleteCallback?onDeleteCallback:this.onImageDeleted.bind(this));this.config=config;this.render();}
var _proto=Uploader.prototype;_proto.onImageChanged=function onImageChanged(data){this.dataStore.set(this.config.dataScope.toString(),data);};_proto.onImageDeleted=function onImageDeleted(){this.dataStore.set(this.config.dataScope.toString(),"");};_proto.getUiComponent=function getUiComponent(){return _uiRegistry.async(this.config.name);};_proto.render=function render(){(0,_uiLayout)([this.config]);};return Uploader;}();return Uploader;});