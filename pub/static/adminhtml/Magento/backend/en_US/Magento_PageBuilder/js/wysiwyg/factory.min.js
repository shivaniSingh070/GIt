define(["jquery","Magento_PageBuilder/js/utils/loader"],function(_jquery,_loader){function create(contentTypeId,elementId,contentTypeName,config,dataStore,fieldName,stageId){config=_jquery.extend(true,{},config);return new Promise(function(resolve){(0,_loader)([config.adapter_config.component],function(WysiwygInstance){new Promise(function(configResolve){if(config.adapter_config.config_modifiers&&config.adapter_config.config_modifiers[contentTypeName]){(0,_loader)([config.adapter_config.config_modifiers[contentTypeName]],function(ConfigModifierType){var modifier=new ConfigModifierType();modifier.modify(contentTypeId,config);configResolve();});}else{configResolve();}}).then(function(){var wysiwyg=new WysiwygInstance(contentTypeId,elementId,config,dataStore,fieldName,stageId);if(config.adapter_config.component_initializers&&config.adapter_config.component_initializers[contentTypeName]){(0,_loader)([config.adapter_config.component_initializers[contentTypeName]],function(InitializerType){var initializer=new InitializerType();initializer.initialize(wysiwyg);resolve(wysiwyg);});}else{resolve(wysiwyg);}});});});}
return create;});