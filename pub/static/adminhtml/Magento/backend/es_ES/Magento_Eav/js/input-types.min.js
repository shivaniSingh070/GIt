define(['jquery','mage/translate'],function($){'use strict';return function(config){$('select#frontend_input').each(function(){var select=$(this),currentValue=select.find('option:selected').val(),compatibleTypes=config.inputTypes,enabledTypes=[],iterator,warning=$('<label>').hide().text($.mage.__('These changes affect all related products.')).addClass('mage-error').attr({generated:true,for:select.attr('id')}),hint=$('<p>').hide().addClass('note').attr({generated:true}),hints=config.hints,toggleWarning=function(){if(select.find('option:selected').val()===currentValue){warning.hide();}else{warning.show();}},toggleHint=function(){if(typeof hints[select.find('option:selected').val()]!=='undefined'){select.after(hint.show().text(hints[select.find('option:selected').val()]));}else{hint.hide();}},removeOption=function(){if(!~enabledTypes.indexOf($(this).val())){$(this).remove();}};for(iterator=0;iterator<compatibleTypes.length;iterator++){if(compatibleTypes[iterator].indexOf(currentValue)>=0){enabledTypes=compatibleTypes[iterator];}}
if(~enabledTypes.indexOf(currentValue)){select.removeAttr('disabled').find('option').each(removeOption);select.after(warning).on('change',toggleWarning);}
select.on('change',toggleHint);toggleHint();});};});