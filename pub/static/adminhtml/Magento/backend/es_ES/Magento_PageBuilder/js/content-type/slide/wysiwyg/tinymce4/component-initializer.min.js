define(["jquery","mage/adminhtml/wysiwyg/events","Magento_PageBuilder/js/utils/delay-until"],function(_jquery,_events,_delayUntil){var ComponentInitializer=function(){"use strict";function ComponentInitializer(){this.sliderSelector=".slick-list";this.sliderContentSelector=".slick-track";this.slideSelector=".slick-slide";this.activeSlideSelector=".slick-current";this.slideChanging=false;}
var _proto=ComponentInitializer.prototype;_proto.initialize=function initialize(wysiwyg){var _this=this;this.$element=(0,_jquery)("#"+wysiwyg.elementId);this.config=wysiwyg.config;var tinymce=wysiwyg.getAdapter();tinymce.eventBus.attachEventHandler(_events.afterFocus,this.onFocus.bind(this));tinymce.eventBus.attachEventHandler(_events.afterBlur,this.onBlur.bind(this));(0,_jquery)(this.$element.parents(this.sliderSelector)).parent().on("beforeChange",function(){_this.slideChanging=true;}).on("afterChange",function(){_this.slideChanging=false;});};_proto.onFocus=function onFocus(){var _this2=this;var $slider=(0,_jquery)(this.$element.parents(this.sliderSelector));var sliderContent=this.$element.parents(this.sliderContentSelector)[0];var $notActiveSlides=$slider.find(this.slideSelector).not(this.activeSlideSelector);if((0,_jquery)(window).width()<this.$element.offset().left+parseInt(this.config.adapter_config.minToolbarWidth,10)){this.$element.addClass("_right-aligned-toolbar");}else{this.$element.removeClass("_right-aligned-toolbar");}
(0,_delayUntil)(function(){_jquery.each(_this2.config.adapter_config.parentSelectorsToUnderlay,function(i,selector){_this2.$element.closest(selector).css("z-index",100);});$slider.parent().slick("slickSetOption","accessibility",false);_this2.autoplay=$slider.parent().slick("slickGetOption","autoplay");_this2.fade=$slider.parent().slick("slickGetOption","fade");if(_this2.autoplay){$slider.parent().slick("slickPause");}
if(!_this2.fade){$notActiveSlides.css("display","none");}
_this2.sliderTransform=sliderContent.style.transform;sliderContent.style.transform="";$slider.css("overflow","visible");},function(){return!_this2.slideChanging;},10);};_proto.onBlur=function onBlur(){var _this3=this;var $slider=(0,_jquery)(this.$element.parents(this.sliderSelector));var sliderContent=this.$element.parents(this.sliderContentSelector)[0];var $notActiveSlides=$slider.find(this.slideSelector).not(this.activeSlideSelector);_jquery.each(this.config.adapter_config.parentSelectorsToUnderlay,function(i,selector){_this3.$element.closest(selector).css("z-index","");});$slider.css("overflow","hidden");sliderContent.style.transform=this.sliderTransform;$notActiveSlides.css("display","block");$slider.parent().slick("slickSetOption","accessibility",true);if(this.autoplay){$slider.parent().slick("slickPlay");}};return ComponentInitializer;}();return ComponentInitializer;});