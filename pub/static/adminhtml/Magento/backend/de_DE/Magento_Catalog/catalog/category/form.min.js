define(['jquery','Magento_Ui/js/modal/alert'],function($,alert){'use strict';return function(config){var categoryForm={options:{categoryIdSelector:'input[name="id"]',categoryPathSelector:'input[name="path"]',categoryParentSelector:'input[name="parent"]',categoryLevelSelector:'input[name="level"]',refreshUrl:config.refreshUrl},refreshPath:function(){if(!$(this.options.categoryIdSelector)){return false;}
$.ajax({url:this.options.refreshUrl,method:'GET',showLoader:true}).done(this._refreshPathSuccess.bind(this));},_refreshPathSuccess:function(data){if(data.error){alert({content:data.message});}else{$(this.options.categoryIdSelector).val(data.id).change();$(this.options.categoryPathSelector).val(data.path).change();$(this.options.categoryParentSelector).val(data.parentId).change();$(this.options.categoryLevelSelector).val(data.level).change();}}};$('body').on('categoryMove.tree',$.proxy(categoryForm.refreshPath.bind(categoryForm),this));};});