define(["Magento_PageBuilder/js/config","Magento_PageBuilder/js/content-type-collection"],function(_config,_contentTypeCollection){function buildTree(contentType){var data=getData(contentType);var viewportsData=getViewportsData(contentType);var tree={name:contentType.config.name,id:contentType.id,data:data,children:[],viewportsData:viewportsData};if(contentType instanceof _contentTypeCollection&&contentType.getChildren()().length>0){contentType.getChildren()().forEach(function(child){tree.children.push(buildTree(child));});}
return tree;}
function getSerializedTree(contentType){return buildTree(contentType);}
function getData(contentType){return JSON.parse(JSON.stringify(contentType.dataStores[_config.getConfig("defaultViewport")].getState()))||{};}
function getViewportsData(contentType){var result={};Object.keys(contentType.dataStores).forEach(function(name){result[name]=JSON.parse(JSON.stringify(contentType.dataStores[name].getState()))||{};});return result;}
return{buildTree:buildTree,getSerializedTree:getSerializedTree};});